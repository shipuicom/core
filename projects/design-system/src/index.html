<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>DesignSystem</title>
    <base href="/" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <link rel="stylesheet" href="/spk.css" />
  </head>
  <body>
    <svg width="0" height="0">
      <!-- Your Original Filters (kept for reference) -->
      <filter id="displacement-filter">
        <feTurbulence type="fractalNoise" baseFrequency="0.01 0.04" numOctaves="1" result="turbulence" />
        <feDisplacementMap in2="turbulence" in="SourceGraphic" scale="50" xChannelSelector="R" yChannelSelector="G" />
      </filter>
      <filter id="displacement-blur-filter">
        <feTurbulence type="fractalNoise" baseFrequency="0.01 0.04" numOctaves="1" result="turbulence" />
        <feDisplacementMap
          in2="turbulence"
          in="SourceGraphic"
          scale="50"
          xChannelSelector="R"
          yChannelSelector="G"
          result="displaced" />
        <feGaussianBlur in="displaced" stdDeviation="4" />
      </filter>

      <filter id="edge-refraction-filter" color-interpolation-filters="sRGB">
        <!-- Step 1: Create the turbulence pattern for distortion -->
        <feTurbulence type="fractalNoise" baseFrequency="0.01 0.04" numOctaves="1" result="turbulence" />

        <!-- Step 2: Create the "edge mask" -->
        <!-- First, shrink the original shape's alpha channel -->
        <feMorphology in="SourceAlpha" operator="erode" radius="15" result="eroded_alpha" />
        <!-- Then, blur the shrunken shape to create a soft inner core -->
        <feGaussianBlur in="eroded_alpha" stdDeviation="2" result="blurred_core" />
        <!-- Now, subtract the blurred core from the original shape's alpha.
             The result is a soft glow only at the edges. -->
        <feComposite in="SourceAlpha" in2="blurred_core" operator="out" result="edge_glow" />

        <!-- Step 3: Use the edge glow as a mask for the turbulence -->
        <!-- The "in" operator here means we keep the turbulence only where the edge_glow is visible. -->
        <feComposite in="turbulence" in2="edge_glow" operator="in" result="masked_turbulence" />

        <!-- Step 4: Displace the original graphic using our new masked turbulence map -->
        <feDisplacementMap
          in="SourceGraphic"
          in2="masked_turbulence"
          scale="25"
          xChannelSelector="R"
          yChannelSelector="G"
          result="displaced_edges" />

        <!-- Step 5: Apply a final blur for the frosted glass look -->
        <feGaussianBlur in="displaced_edges" stdDeviation="4" />
      </filter>

      <filter id="refraction-with-rainbow-glare" color-interpolation-filters="sRGB">
        <!-- ====================================================================== -->
        <!-- Part 1: Create the base glass effect (same as edge-refraction-filter) -->
        <!-- ====================================================================== -->
        <feTurbulence type="fractalNoise" baseFrequency="0.01 0.04" numOctaves="1" result="turbulence" />
        <feMorphology in="SourceAlpha" operator="erode" radius="10" result="eroded_alpha" />
        <feGaussianBlur in="eroded_alpha" stdDeviation="3" result="blurred_core" />
        <feComposite in="SourceAlpha" in2="blurred_core" operator="out" result="edge_glow" />
        <feComposite in="turbulence" in2="edge_glow" operator="in" result="masked_turbulence" />
        <feDisplacementMap
          in="SourceGraphic"
          in2="masked_turbulence"
          scale="25"
          xChannelSelector="R"
          yChannelSelector="G"
          result="displaced_edges" />
        <feGaussianBlur in="displaced_edges" stdDeviation="4" result="base_glass_effect" />

        <!-- <feBlend in="base_glass_effect" mode="screen" /> -->
      </filter>
    </svg>
    <app-root></app-root>
  </body>
</html>
